# Implementation Plan: AI/Spec-Driven Textbook Creation for Physical AI & Humanoid Robotics

**Feature**: `01-textbook-creation` | **Branch**: `main` | **Date**: 2025-12-09 | **Spec**: [specs/01-textbook-creation/spec.md](../specs/01-textbook-creation/spec.md)
**Input**: Feature specification from `/specs/01-textbook-creation/spec.md`

**Note**: This template is filled in by the `/sp.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

Create a modular, highly structured textbook using Docusaurus, written through Spec-Kit Plus workflows, with content generated and refined using Claude Code. The textbook will cover Physical AI fundamentals, humanoid robotics concepts, practical robotics skills, and AI-driven workflows with exactly 4 chapters that include learning outcomes, real-world examples, diagrams/visuals, and practical exercises for each chapter.

## Technical Context

**Language/Version**: Markdown, MDX, JavaScript/TypeScript for Docusaurus
**Primary Dependencies**:
- Docusaurus 3.x (upgrade from 2.0.0-beta.6)
- React 18 (upgrade from 17)
- Node.js 18.0+ (required for Docusaurus 3.x)
- Spec-Kit Plus
- Claude Code
**Storage**: Git repository with content stored in /docs directory
**Testing**: Content validation, Docusaurus build checks, link verification
**Target Platform**: Web (GitHub Pages)
**Project Type**: Documentation/static site
**Performance Goals**: Fast loading pages, accessible navigation, responsive design
**Constraints**: Must follow Docusaurus MDX structure, technical accuracy verified, beginner-friendly explanations, existing content must remain unchanged during upgrades
**Scale/Scope**: Exactly 4 chapters, 3,000-5,000 words per chapter, modular and maintainable content

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

**Status: PASSED** - All constitution principles are addressed in the implementation approach

- Educational Excellence and Accessibility: Content will be technically accurate for robotics and AI while remaining accessible to beginners through the defined audience requirements (basic programming and math/physics knowledge)
- Modular and Maintainable Structure: Each chapter will follow standardized format with Overview → Concepts → Examples → Code → Exercises as required
- Spec-Driven Content Generation: All content will follow Spec-Kit Plus workflows with precise specifications through the defined pipeline
- Technical Accuracy and Clarity: All technical explanations will prioritize correctness while maintaining clarity, with verification by subject matter experts
- Docusaurus-Optimized Presentation: All content will be structured for Docusaurus with MDX format as specified in the architecture
- Human-Editable Autogenerated Content: All generated content will remain editable and logically structured in the Git repository

## Environment Upgrade Strategy

### Overview

This plan incorporates critical environment upgrades required to modernize the textbook platform from legacy beta versions to stable, production-ready dependencies. The upgrade must be executed as infrastructure-only changes with zero impact on educational content.

### Version Upgrade Path

**Current State**:
- Docusaurus: 2.0.0-beta.6 (legacy beta version)
- React: 17
- Node.js: Version unspecified (likely < 18)

**Target State** (per spec ENV-001, ENV-002, ENV-003):
- Docusaurus: Latest stable 3.x release
- React: 18
- Node.js: 18.0 or higher

**Rationale**: Docusaurus 3.x provides improved performance, better TypeScript support, enhanced MDX capabilities, and long-term stability with active maintenance. React 18 is required for Docusaurus 3.x compatibility.

### Upgrade Constraints (per spec ENV-004 through ENV-007)

**Content Preservation** (Critical):
- All existing MD/MDX textbook content in `/docs` MUST remain unchanged byte-for-byte
- No content regeneration allowed during upgrade process
- All chapters, examples, exercises, and visual materials preserved exactly as-is

**Upgrade Scope** (Permitted Changes):
- `package.json` dependency version updates
- `docusaurus.config.js` configuration syntax updates for v3 compatibility
- Plugin installation and configuration (search plugin re-enablement)
- Build scripts and deployment configuration
- GitHub Pages deployment settings

**Upgrade Scope** (Prohibited Changes):
- Chapter content files (MD/MDX)
- Visual materials and diagrams
- Code examples within chapters
- Exercise definitions

### Plugin Migration Requirements

**Search Plugin** (per spec ENV-006):
- Current: Search functionality may be disabled or using beta-era plugin
- Target: Re-enable search with Docusaurus 3.x-compatible plugin
- Options:
  - `@docusaurus/theme-search-algolia` for Algolia-based search
  - Local search plugin (e.g., `@easyops-cn/docusaurus-search-local`)
- Must support: Full-text search with result highlighting and ranking (per spec FR-009)

### Validation Requirements (per spec ENV-008, ENV-009)

**Post-Upgrade Validation**:
- All 4 chapters render correctly without errors
- Navigation (breadcrumbs, next/previous, table of contents) functions as expected
- Search capabilities work with result highlighting
- Visual materials load and display properly
- Code examples render with proper syntax highlighting
- Deployment to GitHub Pages succeeds without errors
- `npm run build` completes with exit code 0 and no error messages

**Acceptance Criteria**: Zero regressions in user-facing functionality

### Upgrade Execution Strategy

**Phase-Based Approach**:

1. **Pre-Upgrade Audit**:
   - Document current package versions
   - Identify all Docusaurus plugins in use
   - Create backup/checkpoint of current working state
   - Verify all content files are committed to Git

2. **Dependency Upgrade**:
   - Update Node.js to 18.0+ in development environment
   - Update `package.json` with Docusaurus 3.x and React 18
   - Run `npm install` to resolve dependency tree
   - Address any peer dependency conflicts

3. **Configuration Migration**:
   - Update `docusaurus.config.js` syntax for v3 compatibility
   - Migrate plugin configurations to v3 API
   - Update theme configuration if necessary
   - Configure search plugin

4. **Build Validation**:
   - Run `npm run build` and verify success
   - Test local dev server with `npm start`
   - Verify all chapters render correctly
   - Test navigation and search functionality

5. **Deployment Validation**:
   - Deploy to GitHub Pages test environment
   - Verify production build functions correctly
   - Run full validation test suite (ENV-008 criteria)

6. **Rollback Plan**:
   - Git revert capability for all configuration changes
   - Documented steps to restore previous working state
   - No content changes means easy rollback

### Risk Mitigation

**Risk**: Breaking changes in Docusaurus 3.x API
**Mitigation**: Follow official Docusaurus migration guide, test incrementally, maintain Git history for rollback

**Risk**: Search plugin incompatibility
**Mitigation**: Research Docusaurus 3.x-compatible search plugins before upgrade, have fallback options ready

**Risk**: MDX syntax changes breaking existing content
**Mitigation**: Run build validation immediately after upgrade, fix any MDX compatibility issues without changing content semantics

**Risk**: GitHub Pages deployment configuration changes
**Mitigation**: Review Docusaurus 3.x deployment documentation, test deployment to staging environment first

## Project Structure

### Documentation (this feature)

```text
specs/01-textbook-creation/
├── plan.md              # This file (/sp.plan command output)
├── research.md          # Phase 0 output (/sp.plan command)
├── data-model.md        # Phase 1 output (/sp.plan command)
├── quickstart.md        # Phase 1 output (/sp.plan command)
├── contracts/           # Phase 1 output (/sp.plan command)
└── tasks.md             # Phase 2 output (/sp.tasks command - NOT created by /sp.plan)
```

### Source Code (repository root)

```text
docs/
├── textbook/
│   ├── intro.md
│   ├── chapter-01-physical-ai-fundamentals/      # Physical AI Fundamentals
│   │   ├── index.md                              # Overview
│   │   ├── concepts.md                           # Core concepts
│   │   ├── examples.md                           # Real-world examples
│   │   ├── code.md                               # Code examples
│   │   └── exercises.md                          # Practical exercises
│   ├── chapter-02-humanoid-robotics/             # Humanoid Robotics Concepts
│   │   ├── index.md                              # Overview
│   │   ├── concepts.md                           # Core concepts
│   │   ├── examples.md                           # Real-world examples
│   │   ├── code.md                               # Code examples
│   │   └── exercises.md                          # Practical exercises
│   ├── chapter-03-practical-robotics-skills/     # Practical Robotics Skills
│   │   ├── index.md                              # Overview
│   │   ├── concepts.md                           # Core concepts
│   │   ├── examples.md                           # Real-world examples
│   │   ├── code.md                               # Code examples
│   │   └── exercises.md                          # Practical exercises
│   ├── chapter-04-ai-driven-workflows/           # AI-Driven Workflows and Tools
│   │   ├── index.md                              # Overview
│   │   ├── concepts.md                           # Core concepts
│   │   ├── examples.md                           # Real-world examples
│   │   ├── code.md                               # Code examples
│   │   └── exercises.md                          # Practical exercises
│   ├── assets/
│   │   ├── images/
│   │   └── diagrams/
│   └── _category_.json
│
├── docusaurus.config.js
├── package.json
└── sidebar.js
```

**Structure Decision**: Single documentation project using Docusaurus with modular chapter structure. Each chapter contains 5 files following the constitutional mandate: index.md (Overview) → concepts.md (Concepts) → examples.md (Examples) → code.md (Code) → exercises.md (Exercises).

**Module Organization**: The textbook is organized as a single module containing 4 chapters, each covering a major topic area. While the data model defines a Module entity, the implementation uses a flat chapter structure for simplicity, as each chapter is self-contained.

**Search Implementation**: Docusaurus built-in search using @docusaurus/preset-classic with algolia or local search plugin for full-text search with result highlighting.

**PDF Generation**: Using docusaurus-prince-pdf or @docusaurus/plugin-content-docs export features to generate printable/downloadable PDF versions of the textbook.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| [e.g., 4th project] | [current need] | [why 3 projects insufficient] |
| [e.g., Repository pattern] | [specific problem] | [why direct DB access insufficient] |